---
layout:     post
title:      Linux文件的隐藏属性和预设权限
date:       2017-09-04
author:     JWQ
catalog: true
tags:
  Linux
  总结
---

# Linux文件的隐藏属性和预设权限

> 在Linux中，除了我们平常说到的`rwx`这三个属性外，还有三个隐藏的属性
它们分别是什么，又有什么作用呢？我们创建了一个文件或者一个文件夹的时候，它的默认属性又是什么呢？今天就让我们来介绍一下。

### 隐藏属性
众所周知，在Linux下无论是文件还是文件夹（其实文件夹也是文件），都有三种权限`rwx`,分别对应着：读权限，写权限和执行权限

    注意对于文件夹如果没有执行的权限的话则无法进入！！！

然而，事实上还有三种隐藏的属性存在，它们分别是：

* SUID
* SGID
* SBIT

下面就来介绍一下它们分别都有什么作用：

#### SUID
    当有一个s出现在拥有者的x权限上时，就称为SUID
SUID的特性有：

* 仅对二进制文件有效
* 执行者对该程序具有x的权限
* 本权限仅在执行该程序的过程中有效
* 执行者将获得拥有者的权限

举例来说明的话就比如普通用户可以修改自己的密码。我们都知道，用户的密码存放在/etc/shadow 这个文件里面，这个文件的权限为：[---------- 1 root],意思是这个文件只有root可读且仅有root可以强制写入。那么普通用户是怎么修改自己的密码的呢？

修改密码是用`passwd`这个命令来完成，因为普通用户对于`passwd`这个程序是具有x的权限的，而passwd的拥有者是root，所以在passwd的执行过程中，会短暂的获得root的权限，所以普通用户就可以通过`passwd`这个程序来修改/etc/shadow这个文件，达成修改密码的目的。

    这就是SUID的使用！

***

#### SGID
    既然SUID是出现在拥有者的x权限的s，那么SGID当然就是出现在群组的x权限的s
    
SGID的特性是：

* SGID 对二进制程序有用
* 程序的执行者对于改程序来说，需具备x的权限
* 执行者在执行的过程中将会获得改程序的群组的支持

**与SUID 不同的是SGID 可以针对文件或文件夹**

若一个目录设定了SGID的权限后，它将具有如下的功能：

* 用户若对于此目录具有r与x的权限时，该用户能够进入此目录；
* 用户在此目录下的有效群组（effective group）将会变成该目录的群组；
* 用途 ：若用户在此目录下具有w的权限（可以新建文件），则使用者所建立的新文件的群组与该目录的群组相同。

***

#### SBIT
    在其他人的x权限出现t，且SBIT目前仅针对目录有效。
    
SBIT对于目录的作用是：

* 当用户对此目录具有w，x的权限时，也将辉拥有r的权限
* 当用户在该目录下建立新文件或新目录时，仅有自己与root才有权利删除该文件或文件夹

### 关于隐藏权限的数值与设置

普通的权限可以通过数字来设置，那么隐藏权限有没有对应的权限来方便设置呢，答案当然时有；

* SUID : 4
* SGID : 2
* SBIT : 1

设置权限可以这么写：

    eg：chmod 7666 jwq.sh
    注意，此处时给与所有的隐藏权限，但是因为文件本身就没有对应的权限，此时文件的权限就会变成这个样子： -rwSrwSrwT
    
### 文件的预设权限

    当我们新建一个文件或者时文件夹的时候，这个新建的文件的权限时怎么样的呢？我们有能否对它进行修改呢？

默认情况下：

* 创建文件时，默认的权限是：666
* 创建文件夹时，默认的权限是：777

可以通过命令：`umask`来进行修改

    注意：umask指定的是减去权限，且是在系统默认给的权限上进行加减！！！

eg：若umask为`003`,建立的文件和文件夹的权限是什么？

> umask为003，所以去掉的权限为：--------wx，
所以
文件的权限是：-rw-rw-r--
文件夹的权限是：drwxrwxr--

    注意：不能直接减去数字，而应该看数字对应的权限！！！
